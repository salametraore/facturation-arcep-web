<!-- src/app/parametre/roles/role-crud/role-crud.component.html -->

<mat-card>

  <!-- Titre -->
  <div class="page-title">
    <h2>{{ title }}</h2>
  </div>

  <section class="list-box">
    <div class="list-header">
      <h3 class="list-title">
        <ng-container *ngIf="!data?.id">Nouvel enregistrement</ng-container>
        <ng-container *ngIf="data?.id">Mise à jour</ng-container>
      </h3>
    </div>

    <div class="list-body">

      <div class="role-crud-scroll">

        <form [formGroup]="form" (ngSubmit)="save()" class="form-grid">

        <!-- Code -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Code</mat-label>
          <input matInput formControlName="code" placeholder="Code">
        </mat-form-field>

        <div class="blank-row"></div>

        <!-- Libellé -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Libellé</mat-label>
          <input matInput formControlName="libelle" placeholder="Libellé" required>
          <mat-error *ngIf="form.get('libelle')?.hasError('required')">
            Libellé obligatoire
          </mat-error>
        </mat-form-field>

        <div class="blank-row"></div>

        <!-- Dual list -->
        <div class="dual-list">

          <div class="pane">
            <b>Opérations disponibles</b>

            <mat-selection-list
              (selectionChange)="onLeftSelectionChange($event)">
              <mat-list-option *ngFor="let op of left" [value]="op">
                {{ op.libelle }}
              </mat-list-option>
            </mat-selection-list>
          </div>

          <div class="actions">
            <button mat-mini-fab type="button" (click)="toRightAll()" matTooltip="Tout à droite">
              <mat-icon>keyboard_double_arrow_right</mat-icon>
            </button>

            <button mat-mini-fab type="button" (click)="toRightSelected()" matTooltip="Sélection à droite">
              <mat-icon>chevron_right</mat-icon>
            </button>

            <button mat-mini-fab type="button" (click)="toLeftSelected()" matTooltip="Sélection à gauche">
              <mat-icon>chevron_left</mat-icon>
            </button>

            <button mat-mini-fab type="button" (click)="toLeftAll()" matTooltip="Tout à gauche">
              <mat-icon>keyboard_double_arrow_left</mat-icon>
            </button>
          </div>

          <div class="pane">
            <b>Opérations du rôle</b>

            <mat-selection-list
              (selectionChange)="onRightSelectionChange($event)">
              <mat-list-option *ngFor="let op of right" [value]="op">
                {{ op.libelle }}
              </mat-list-option>
            </mat-selection-list>
          </div>

        </div>

        <!-- Actions -->
        <div class="form-actions">
          <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid">
            <mat-icon>save</mat-icon>
            Enregistrer
          </button>

          <button mat-stroked-button color="warn" type="button" (click)="close()">
            <mat-icon>close</mat-icon>
            Annuler
          </button>
        </div>

      </form>

      </div>
    </div>
  </section>
</mat-card>
